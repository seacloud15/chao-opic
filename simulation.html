<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>오픽 시뮬레이션 - ChaoOPIc</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <header>
        <div class="container">
            <h1 class="logo"><a href="index.html">ChaoOPIc</a></h1>
            <nav class="nav-links"></nav>
        </div>
    </header>

    <main class="page-content">
        <div class="container" id="sim-root">
        </div>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2026 ChaoOPIc v1.0.0</p>
        </div>
    </footer>

    <!-- Core -->
    <script src="js/core/app.js"></script>
    <script src="js/core/storage.js"></script>
    <script src="js/core/audio.js"></script>
    <script src="js/core/timer.js"></script>
    <script src="js/core/ui.js"></script>
    <script src="js/core/dataLoader.js"></script>
    <script src="js/core/audioIndexManager.js"></script>
    <!-- Data -->
    <script src="js/data/simulation/topicMapping.js"></script>
    <script src="js/data/simulation/audioFileIndex.js"></script>
    <script src="js/data/simulation/questions.js"></script>
    <!-- Core - Question Selection -->
    <script src="js/core/fileScanner.js"></script>
    <script src="js/core/questionSelector.js"></script>
    <!-- Page -->
    <script src="js/pages/simulation.js"></script>
    <script>
        ChaoOPIc.core.ui.renderNav('simulation');

        // fileScanner 초기화 (localStorage 또는 audioFileIndex.js에서 로드)
        if (!ChaoOPIc.core.fileScanner.initialize()) {
            // 초기화 실패 시 경고 메시지 표시
            ChaoOPIc.core.ui.showModal({
                title: '⚠️ 오디오 파일 인덱스 없음',
                content: '<p>오디오 파일 인덱스를 찾을 수 없습니다.</p>' +
                         '<p><a href="audio-manager.html" style="color:#1565c0;text-decoration:underline;">학습 자료 관리</a> 페이지에서 오디오 폴더를 선택하고 스캔해주세요.</p>',
                buttons: [
                    { label: '학습 자료 관리로 이동', className: 'btn-primary',
                      onClick: function() { window.location.href = 'audio-manager.html'; } }
                ]
            });
        } else {
            ChaoOPIc.pages.simulation.init();
        }
    </script>
</body>
</html>
